<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon2.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon2.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon2.png"><link rel="mask-icon" href="/images/favicon2.png" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"daydayup863.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"right",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"bounceIn",post_header:"slideDownIn",post_body:"perspectiveRightIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="PostgreSQL 14 contains many new features and enhancements, including: 123456789101112131415161718Stored procedures can now return data via OUT parameters.The SQL-standard SEARCH and CYCLE options for"><meta property="og:type" content="article"><meta property="og:title" content="PostgreSQL 14 新特性汇总"><meta property="og:url" content="http://daydayup863.github.io/PostgreSQL/release-note/PostgreSQL_14_release_note/index.html"><meta property="og:site_name" content="daydayup863"><meta property="og:description" content="PostgreSQL 14 contains many new features and enhancements, including: 123456789101112131415161718Stored procedures can now return data via OUT parameters.The SQL-standard SEARCH and CYCLE options for"><meta property="og:locale"><meta property="article:published_time" content="2022-02-21T03:08:32.000Z"><meta property="article:modified_time" content="2022-02-21T08:23:14.286Z"><meta property="article:author" content="daydayup"><meta property="article:tag" content="PostgreSQL"><meta property="article:tag" content="release note"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://daydayup863.github.io/PostgreSQL/release-note/PostgreSQL_14_release_note/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-Hans"}</script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>#needsharebutton-float{bottom:88px;cursor:pointer;left:-8px;position:fixed;z-index:9999}#needsharebutton-float .btn{border:1px solid $btn-default-border-color;border-radius:4px;padding:0 10px 0 14px}</style><title>PostgreSQL 14 新特性汇总 | daydayup863</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script type="text/javascript" src="/js/bubble.js"></script><link rel="alternate" href="/atom.xml" title="daydayup863" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><a target="_blank" rel="noopener" href="https://github.com/daydayup863"><img style="position:fixed;top:0;right:0" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_gray_6d6d6d.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">daydayup863</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">人生就像一杯茶，不会苦一辈子，但总会苦一阵子。</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-messagepad"><a href="/messagepad/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>留言板</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans"><link itemprop="mainEntityOfPage" href="http://daydayup863.github.io/PostgreSQL/release-note/PostgreSQL_14_release_note/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/user.jpg"><meta itemprop="name" content="daydayup"><meta itemprop="description" content="good good study, day day up."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="daydayup863"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">PostgreSQL 14 新特性汇总</h1><div class="post-meta"><i class="fa fa-thumbtack"></i> <font color="7D26CD">置顶</font> <span class="post-meta-divider">|</span> <span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-21 11:08:32" itemprop="dateCreated datePublished" datetime="2022-02-21T11:08:32+08:00">2022-02-21</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/PostgreSQL/" itemprop="url" rel="index"><span itemprop="name">PostgreSQL</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/PostgreSQL/release-note/" itemprop="url" rel="index"><span itemprop="name">release note</span></a> </span></span><span id="/PostgreSQL/release-note/PostgreSQL_14_release_note/" class="post-meta-item leancloud_visitors" data-flag-title="PostgreSQL 14 新特性汇总" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/PostgreSQL/release-note/PostgreSQL_14_release_note/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/PostgreSQL/release-note/PostgreSQL_14_release_note/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>PostgreSQL 14 contains many new features and enhancements, including:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Stored <span class="hljs-keyword">procedures</span> can now <span class="hljs-keyword">return</span> data via <span class="hljs-keyword">OUT</span> parameters.<br><br>The <span class="hljs-keyword">SQL</span>-standard <span class="hljs-keyword">SEARCH</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">CYCLE</span> <span class="hljs-keyword">options</span> <span class="hljs-keyword">for</span> common <span class="hljs-keyword">table</span> expressions have been implemented.<br><br>Subscripting can now be applied <span class="hljs-keyword">to</span> <span class="hljs-keyword">any</span> data <span class="hljs-keyword">type</span> <span class="hljs-keyword">for</span> which it <span class="hljs-keyword">is</span> a useful notation, <span class="hljs-keyword">not</span> <span class="hljs-keyword">only</span> arrays. <span class="hljs-keyword">In</span> this <span class="hljs-keyword">release</span>, the <span class="hljs-type">jsonb</span> <span class="hljs-keyword">and</span> hstore <span class="hljs-keyword">types</span> have gained subscripting operators.<br><br>Range <span class="hljs-keyword">types</span> have been extended <span class="hljs-keyword">by</span> adding multiranges, allowing representation <span class="hljs-keyword">of</span> noncontiguous data ranges.<br><br>Numerous performance improvements have been made <span class="hljs-keyword">for</span> parallel queries, heavily-concurrent workloads, partitioned <span class="hljs-keyword">tables</span>, logical <span class="hljs-keyword">replication</span>, <span class="hljs-keyword">and</span> vacuuming.<br><br>B-tree <span class="hljs-keyword">index</span> updates are managed more efficiently, reducing <span class="hljs-keyword">index</span> bloat.<br><br><span class="hljs-keyword">VACUUM</span> automatically becomes more aggressive, <span class="hljs-keyword">and</span> skips inessential cleanup, <span class="hljs-keyword">if</span> the <span class="hljs-keyword">database</span> starts <span class="hljs-keyword">to</span> approach a <span class="hljs-keyword">transaction</span> ID wraparound condition.<br><br>Extended <span class="hljs-keyword">statistics</span> can now be collected <span class="hljs-keyword">on</span> expressions, allowing better planning results <span class="hljs-keyword">for</span> complex queries.<br><br>libpq now has the ability <span class="hljs-keyword">to</span> pipeline multiple queries, which can boost throughput <span class="hljs-keyword">over</span> high-latency connections.<br><br></code></pre></td></tr></table></figure><p>The above items and other new features of PostgreSQL 14 are explained in more detail in the sections below.</p><p>A dump/restore using pg_dumpall or use of pg_upgrade or logical replication is required for those wishing to migrate data from any previous release. See Section 19.6 for general information on migrating to new major releases.</p><p>Version 14 contains a number of changes that may affect compatibility with previous releases. Observe the following incompatibilities:</p><pre><code>User-defined objects that reference certain built-in array functions along with their argument types must be recreated (Tom Lane)

Specifically, array_append(), array_prepend(), array_cat(), array_position(), array_positions(), array_remove(), array_replace(), and width_bucket() used to take anyarray arguments but now take anycompatiblearray. Therefore, user-defined objects like aggregates and operators that reference those array function signatures must be dropped before upgrading, and recreated once the upgrade completes.

Remove deprecated containment operators @ and ~ for built-in geometric data types and contrib modules cube, hstore, intarray, and seg (Justin Pryzby)

The more consistently named &lt;@ and @&gt; have been recommended for many years.

Fix to_tsquery() and websearch_to_tsquery() to properly parse query text containing discarded tokens (Alexander Korotkov)

Certain discarded tokens, like underscore, caused the output of these functions to produce incorrect tsquery output, e.g., both websearch_to_tsquery(&#39;&quot;pg_class pg&quot;&#39;) and to_tsquery(&#39;pg_class &lt;-&gt; pg&#39;) used to output ( &#39;pg&#39; &amp; &#39;class&#39; ) &lt;-&gt; &#39;pg&#39;, but now both output &#39;pg&#39; &lt;-&gt; &#39;class&#39; &lt;-&gt; &#39;pg&#39;.

Fix websearch_to_tsquery() to properly parse multiple adjacent discarded tokens in quotes (Alexander Korotkov)

Previously, quoted text that contained multiple adjacent discarded tokens was treated as multiple tokens, causing incorrect tsquery output, e.g., websearch_to_tsquery(&#39;&quot;aaa: bbb&quot;&#39;) used to output &#39;aaa&#39; &lt;2&gt; &#39;bbb&#39;, but now outputs &#39;aaa&#39; &lt;-&gt; &#39;bbb&#39;.

Change EXTRACT() to return type numeric instead of float8 (Peter Eisentraut)

This avoids loss-of-precision issues in some usages. The old behavior can still be obtained by using the old underlying function date_part().

Also, EXTRACT(date) now throws an error for units that are not part of the date data type.

Change var_samp() and stddev_samp() with numeric parameters to return NULL when the input is a single NaN value (Tom Lane)

Previously NaN was returned.

Return false for has_column_privilege() checks on non-existent or dropped columns when using attribute numbers (Joe Conway)

Previously such attribute numbers returned an invalid-column error.

Fix handling of infinite window function ranges (Tom Lane)

Previously window frame clauses like &#39;inf&#39; PRECEDING AND &#39;inf&#39; FOLLOWING returned incorrect results.

Remove factorial operators ! and !!, as well as function numeric_fac() (Mark Dilger)

The factorial() function is still supported.

Disallow factorial() of negative numbers (Peter Eisentraut)

Previously such cases returned 1.

Remove support for postfix (right-unary) operators (Mark Dilger)

pg_dump and pg_upgrade will warn if postfix operators are being dumped.

Allow \D and \W shorthands to match newlines in regular expression newline-sensitive mode (Tom Lane)

Previously they did not match newlines in this mode, but that disagrees with the behavior of other common regular expression engines. [^[:digit:]] or [^[:word:]] can be used to get the old behavior.

Disregard constraints when matching regular expression back-references (Tom Lane)

For example, in (^\d+).*\1, the ^ constraint should be applied at the start of the string, but not when matching \1.

Disallow \w as a range start or end in regular expression character classes (Tom Lane)

This previously was allowed but produced unexpected results.

Require custom server parameter names to use only characters that are valid in unquoted SQL identifiers (Tom Lane)

Change the default of the password_encryption server parameter to scram-sha-256 (Peter Eisentraut)

Previously it was md5. All new passwords will be stored as SHA256 unless this server setting is changed or the password is specified in MD5 format. Also, the legacy (and undocumented) Boolean-like values which were previously synonyms for md5 are no longer accepted.

Remove server parameter vacuum_cleanup_index_scale_factor (Peter Geoghegan)

This setting was ignored starting in PostgreSQL version 13.3.

Remove server parameter operator_precedence_warning (Tom Lane)

This setting was used for warning applications about PostgreSQL 9.5 changes.

Overhaul the specification of clientcert in pg_hba.conf (Kyotaro Horiguchi)

Values 1/0/no-verify are no longer supported; only the strings verify-ca and verify-full can be used. Also, disallow verify-ca if cert authentication is enabled since cert requires verify-full checking.

Remove support for SSL compression (Daniel Gustafsson, Michael Paquier)

This was already disabled by default in previous PostgreSQL releases, and most modern OpenSSL and TLS versions no longer support it.

Remove server and libpq support for the version 2 wire protocol (Heikki Linnakangas)

This was last used as the default in PostgreSQL 7.3 (released in 2002).

Disallow single-quoting of the language name in the CREATE/DROP LANGUAGE command (Peter Eisentraut)

Remove the composite types that were formerly created for sequences and toast tables (Tom Lane)

Process doubled quote marks in ecpg SQL command strings correctly (Tom Lane)

Previously &#39;abc&#39;&#39;def&#39; was passed to the server as &#39;abc&#39;def&#39;, and &quot;abc&quot;&quot;def&quot; was passed as &quot;abc&quot;def&quot;, causing syntax errors.

Prevent the containment operators (&lt;@ and @&gt;) for intarray from using GiST indexes (Tom Lane)

Previously a full GiST index scan was required, so just avoid that and scan the heap, which is faster. Indexes created for this purpose should be removed.

Remove contrib program pg_standby (Justin Pryzby)

Prevent tablefunc&#39;s function normal_rand() from accepting negative values (Ashutosh Bapat)

Negative values produced undesirable results.
</code></pre><h1 id="Changes"><a href="#Changes" class="headerlink" title="Changes"></a>Changes</h1><h2 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Add</span> predefined roles pg_read_all_data <span class="hljs-keyword">and</span> pg_write_all_data (Stephen Frost)<br><br>These non-<span class="hljs-keyword">login</span> roles can be used <span class="hljs-keyword">to</span> give <span class="hljs-keyword">read</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">write</span> permission <span class="hljs-keyword">to</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">tables</span>, views, <span class="hljs-keyword">and</span> <span class="hljs-keyword">sequences</span>.<br><br><span class="hljs-keyword">Add</span> predefined <span class="hljs-keyword">role</span> pg_database_owner that contains <span class="hljs-keyword">only</span> the <span class="hljs-keyword">current</span> databas<span class="hljs-string">e&#x27;s owner (Noah Misch)</span><br><span class="hljs-string"></span><br><span class="hljs-string">This is especially useful in template databases.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Remove temporary files after backend crashes (Euler Taveira)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Previously, such files were retained for debugging purposes. If necessary, deletion can be disabled with the new server parameter remove_temp_files_after_crash.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Allow long-running queries to be canceled if the client disconnects (Sergey Cherkashin, Thomas Munro)</span><br><span class="hljs-string"></span><br><span class="hljs-string">The server parameter client_connection_check_interval allows control over whether loss of connection is checked for intra-query. (This is supported on Linux and a few other operating systems.)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Add an optional timeout parameter to pg_terminate_backend() (Magnus Hagander)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Allow wide tuples to be always added to almost-empty heap pages (John Naylor, Floris van Nee)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Previously tuples whose insertion would have exceeded the page&#x27;</span>s fill factor were <span class="hljs-keyword">instead</span> added <span class="hljs-keyword">to</span> <span class="hljs-built_in">new</span> pages.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">Server</span> <span class="hljs-type">Name</span> Indication (SNI) <span class="hljs-keyword">in</span> SSL <span class="hljs-keyword">connection</span> packets (Peter Eisentraut)<br><br>This can be disabled <span class="hljs-keyword">by</span> turning <span class="hljs-keyword">off</span> client <span class="hljs-keyword">connection</span> <span class="hljs-keyword">option</span> sslsni.<br></code></pre></td></tr></table></figure><h2 id="Vacuuming"><a href="#Vacuuming" class="headerlink" title="Vacuuming"></a>Vacuuming</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Allow <span class="hljs-keyword">vacuum</span> <span class="hljs-keyword">to</span> skip <span class="hljs-keyword">index</span> vacuuming <span class="hljs-keyword">when</span> the number <span class="hljs-keyword">of</span> removable <span class="hljs-keyword">index</span> entries <span class="hljs-keyword">is</span> insignificant (Masahiko Sawada, Peter Geoghegan)<br><br>The <span class="hljs-keyword">vacuum</span> parameter INDEX_CLEANUP has a <span class="hljs-built_in">new</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">of</span> auto that enables this optimization.<br><br>Allow <span class="hljs-keyword">vacuum</span> <span class="hljs-keyword">to</span> more eagerly <span class="hljs-keyword">add</span> deleted btree pages <span class="hljs-keyword">to</span> the free space map (Peter Geoghegan)<br><br>Previously <span class="hljs-keyword">vacuum</span> could <span class="hljs-keyword">only</span> <span class="hljs-keyword">add</span> pages <span class="hljs-keyword">to</span> the free space map that were marked <span class="hljs-keyword">as</span> deleted <span class="hljs-keyword">by</span> previous vacuums.<br><br>Allow <span class="hljs-keyword">vacuum</span> <span class="hljs-keyword">to</span> reclaim space used <span class="hljs-keyword">by</span> unused <span class="hljs-keyword">trailing</span> heap <span class="hljs-type">line</span> pointers (Matthias van de Meent, Peter Geoghegan)<br><br>Allow <span class="hljs-keyword">vacuum</span> <span class="hljs-keyword">to</span> be more aggressive <span class="hljs-keyword">in</span> removing dead <span class="hljs-keyword">rows</span> during minimal-locking <span class="hljs-keyword">index</span> operations (Álvaro Herrera)<br><br>Specifically, <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">CONCURRENTLY</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">REINDEX</span> <span class="hljs-keyword">CONCURRENTLY</span> <span class="hljs-keyword">no</span> longer <span class="hljs-keyword">limit</span> the dead <span class="hljs-keyword">row</span> removal <span class="hljs-keyword">of</span> other relations.<br><br>Speed up vacuuming <span class="hljs-keyword">of</span> databases <span class="hljs-keyword">with</span> many relations (Tatsuhito Kasahara)<br><br>Reduce the <span class="hljs-keyword">default</span> <span class="hljs-keyword">value</span> <span class="hljs-keyword">of</span> vacuum_cost_page_miss <span class="hljs-keyword">to</span> better reflect <span class="hljs-keyword">current</span> hardware capabilities (Peter Geoghegan)<br><br><span class="hljs-keyword">Add</span> ability <span class="hljs-keyword">to</span> skip vacuuming <span class="hljs-keyword">of</span> TOAST <span class="hljs-keyword">tables</span> (Nathan Bossart)<br><br><span class="hljs-keyword">VACUUM</span> now has a PROCESS_TOAST <span class="hljs-keyword">option</span> which can be <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">false</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> TOAST processing, <span class="hljs-keyword">and</span> vacuumdb has a <span class="hljs-comment">--no-process-toast option.</span><br><br>Have <span class="hljs-keyword">COPY</span> <span class="hljs-keyword">FREEZE</span> appropriately <span class="hljs-keyword">update</span> page visibility bits (Anastasia Lubennikova, Pavan Deolasee, Jeff Janes)<br><br>Cause <span class="hljs-keyword">vacuum</span> operations <span class="hljs-keyword">to</span> be more aggressive <span class="hljs-keyword">if</span> the <span class="hljs-keyword">table</span> <span class="hljs-keyword">is</span> near xid <span class="hljs-keyword">or</span> multixact wraparound (Masahiko Sawada, Peter Geoghegan)<br><br>This <span class="hljs-keyword">is</span> controlled <span class="hljs-keyword">by</span> vacuum_failsafe_age <span class="hljs-keyword">and</span> vacuum_multixact_failsafe_age.<br><br>Increase <span class="hljs-built_in">warning</span> <span class="hljs-type">time</span> <span class="hljs-keyword">and</span> hard <span class="hljs-keyword">limit</span> <span class="hljs-keyword">before</span> <span class="hljs-keyword">transaction</span> id <span class="hljs-keyword">and</span> multi-<span class="hljs-keyword">transaction</span> wraparound (Noah Misch)<br><br>This should reduce the possibility <span class="hljs-keyword">of</span> failures that occur <span class="hljs-keyword">without</span> <span class="hljs-keyword">having</span> issued warnings about wraparound.<br><br><span class="hljs-keyword">Add</span> per-<span class="hljs-keyword">index</span> information <span class="hljs-keyword">to</span> autovacuum logging output (Masahiko Sawada)<br></code></pre></td></tr></table></figure><h2 id="Partitioning"><a href="#Partitioning" class="headerlink" title="Partitioning"></a>Partitioning</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Improve <span class="hljs-keyword">the</span> performance <span class="hljs-keyword">of</span> updates <span class="hljs-keyword">and</span> deletes <span class="hljs-keyword">on</span> partitioned tables <span class="hljs-keyword">with</span> many partitions (Amit Langote, Tom Lane)<br><br>This change greatly reduces <span class="hljs-keyword">the</span> planner&#x27;s overhead <span class="hljs-keyword">for</span> such cases, <span class="hljs-keyword">and</span> also allows updates/deletes <span class="hljs-keyword">on</span> partitioned tables <span class="hljs-keyword">to</span> use execution-<span class="hljs-built_in">time</span> partition pruning.<br><br>Allow partitions <span class="hljs-keyword">to</span> be detached <span class="hljs-keyword">in</span> a non-blocking manner (Álvaro Herrera)<br><br>The syntax <span class="hljs-keyword">is</span> ALTER TABLE ... DETACH PARTITION ... CONCURRENTLY, <span class="hljs-keyword">and</span> FINALIZE.<br><br>Ignore COLLATE clauses <span class="hljs-keyword">in</span> partition boundary values (Tom Lane)<br><br>Previously any such clause had <span class="hljs-keyword">to</span> match <span class="hljs-keyword">the</span> collation <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> partition key; <span class="hljs-keyword">but</span> <span class="hljs-keyword">it</span>&#x27;s more consistent <span class="hljs-keyword">to</span> consider <span class="hljs-keyword">that</span> <span class="hljs-keyword">it</span>&#x27;s automatically coerced <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> collation <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> partition key.<br></code></pre></td></tr></table></figure><h2 id="Indexes"><a href="#Indexes" class="headerlink" title="Indexes"></a>Indexes</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Allow btree index additions <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">remove</span> expired index entries <span class="hljs-keyword">to</span> prevent<span class="hljs-built_in"> page </span>splits (Peter Geoghegan)<br><br>This is particularly helpful <span class="hljs-keyword">for</span> reducing index bloat on tables whose indexed columns are frequently updated.<br><br>Allow BRIN indexes <span class="hljs-keyword">to</span> record multiple min/max values per range (Tomas Vondra)<br><br>This is useful <span class="hljs-keyword">if</span> there are groups of values <span class="hljs-keyword">in</span> each<span class="hljs-built_in"> page </span>range.<br><br>Allow BRIN indexes <span class="hljs-keyword">to</span> use bloom filters (Tomas Vondra)<br><br>This allows BRIN indexes <span class="hljs-keyword">to</span> be used effectively with data that is <span class="hljs-keyword">not</span> well-localized <span class="hljs-keyword">in</span> the heap.<br><br>Allow some GiST indexes <span class="hljs-keyword">to</span> be built by presorting the data (Andrey Borodin)<br><br>Presorting happens automatically <span class="hljs-keyword">and</span> allows <span class="hljs-keyword">for</span> faster index creation <span class="hljs-keyword">and</span> smaller indexes.<br><br>Allow SP-GiST indexes <span class="hljs-keyword">to</span> contain INCLUDE<span class="hljs-string">&#x27;d columns (Pavel Borisov)</span><br></code></pre></td></tr></table></figure><h2 id="Optimizer"><a href="#Optimizer" class="headerlink" title="Optimizer"></a>Optimizer</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Allow hash lookup <span class="hljs-keyword">for</span> <span class="hljs-keyword">IN</span> clauses <span class="hljs-keyword">with</span> many constants (James Coleman, David Rowley)<br><br>Previously the code <span class="hljs-keyword">always</span> sequentially scanned the list <span class="hljs-keyword">of</span> <span class="hljs-keyword">values</span>.<br><br>Increase the number <span class="hljs-keyword">of</span> places extended <span class="hljs-keyword">statistics</span> can be used <span class="hljs-keyword">for</span> <span class="hljs-keyword">OR</span> clause estimation (Tomas Vondra, Dean Rasheed)<br><br>Allow extended <span class="hljs-keyword">statistics</span> <span class="hljs-keyword">on</span> expressions (Tomas Vondra)<br><br>This allows <span class="hljs-keyword">statistics</span> <span class="hljs-keyword">on</span> a <span class="hljs-keyword">group</span> <span class="hljs-keyword">of</span> expressions <span class="hljs-keyword">and</span> <span class="hljs-keyword">columns</span>, rather than <span class="hljs-keyword">only</span> <span class="hljs-keyword">columns</span> <span class="hljs-keyword">like</span> previously. <span class="hljs-keyword">System</span> <span class="hljs-keyword">view</span> pg_stats_ext_exprs reports such <span class="hljs-keyword">statistics</span>.<br><br>Allow efficient heap scanning <span class="hljs-keyword">of</span> a range <span class="hljs-keyword">of</span> TIDs (Edmund Horner, David Rowley)<br><br>Previously a sequential scan was required <span class="hljs-keyword">for</span> non-equality TID specifications.<br><br>Fix <span class="hljs-keyword">EXPLAIN</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">EXPLAIN</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">MATERIALIZED</span> <span class="hljs-keyword">VIEW</span> <span class="hljs-keyword">to</span> honor <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> (Bharath Rupireddy)<br><br>Previously, <span class="hljs-keyword">if</span> the <span class="hljs-keyword">object</span> already existed, <span class="hljs-keyword">EXPLAIN</span> would fail.<br></code></pre></td></tr></table></figure><h2 id="General-Performance"><a href="#General-Performance" class="headerlink" title="General Performance"></a>General Performance</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Improve the speed of computing MVCC visibility snapshots on systems with many CPUs <span class="hljs-keyword">and</span> high session counts (Andres Freund)<br><br>This also improves performance when there are many idle sessions.<br><br><span class="hljs-builtin-name">Add</span> executor method <span class="hljs-keyword">to</span> memoize results <span class="hljs-keyword">from</span> the inner side of a nested-loop join (David Rowley)<br><br>This is useful <span class="hljs-keyword">if</span> only a small percentage of rows is checked on the inner side. It can be disabled via<span class="hljs-built_in"> server </span>parameter enable_memoize.<br><br>Allow window functions <span class="hljs-keyword">to</span> perform incremental sorts (David Rowley)<br><br>Improve the I/O performance of parallel sequential scans (Thomas Munro, David Rowley)<br><br>This was done by allocating blocks <span class="hljs-keyword">in</span> groups <span class="hljs-keyword">to</span> parallel workers.<br><br>Allow a query referencing multiple foreign tables <span class="hljs-keyword">to</span> perform foreign table scans <span class="hljs-keyword">in</span> parallel (Robert Haas, Kyotaro Horiguchi, Thomas Munro, Etsuro Fujita)<br><br>postgres_fdw supports this<span class="hljs-built_in"> type </span>of scan <span class="hljs-keyword">if</span> async_capable is set.<br><br>Allow analyze <span class="hljs-keyword">to</span> <span class="hljs-keyword">do</span><span class="hljs-built_in"> page </span>prefetching (Stephen Frost)<br><br>This is controlled by maintenance_io_concurrency.<br><br>Improve performance of regular expression searches (Tom Lane)<br><br>Dramatically improve Unicode normalization performance (John Naylor)<br><br>This speeds normalize() <span class="hljs-keyword">and</span> IS NORMALIZED.<br><br><span class="hljs-builtin-name">Add</span> ability <span class="hljs-keyword">to</span> use LZ4 compression on TOAST data (Dilip Kumar)<br><br>This can be <span class="hljs-builtin-name">set</span> at the column level, <span class="hljs-keyword">or</span> <span class="hljs-builtin-name">set</span> as a<span class="hljs-built_in"> default </span>via<span class="hljs-built_in"> server </span>parameter default_toast_compression. The<span class="hljs-built_in"> server </span>must be compiled with --with-lz4 <span class="hljs-keyword">to</span> support this feature. The<span class="hljs-built_in"> default </span>setting is still pglz.<br></code></pre></td></tr></table></figure><h2 id="Monitoring"><a href="#Monitoring" class="headerlink" title="Monitoring"></a>Monitoring</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">If</span> <span class="hljs-keyword">server</span> parameter compute_query_id <span class="hljs-keyword">is</span> enabled, display the query id <span class="hljs-keyword">in</span> pg_stat_activity, <span class="hljs-keyword">EXPLAIN</span> <span class="hljs-keyword">VERBOSE</span>, csvlog, <span class="hljs-keyword">and</span> optionally <span class="hljs-keyword">in</span> log_line_prefix (Julien Rouhaud)<br><br>A query id computed <span class="hljs-keyword">by</span> an <span class="hljs-keyword">extension</span> will <span class="hljs-keyword">also</span> be displayed.<br><br>Improve logging <span class="hljs-keyword">of</span> auto-<span class="hljs-keyword">vacuum</span> <span class="hljs-keyword">and</span> auto-<span class="hljs-keyword">analyze</span> (Stephen Frost, Jakub Wartak)<br><br>This reports I/O timings <span class="hljs-keyword">for</span> auto-<span class="hljs-keyword">vacuum</span> <span class="hljs-keyword">and</span> auto-<span class="hljs-keyword">analyze</span> <span class="hljs-keyword">if</span> track_io_timing <span class="hljs-keyword">is</span> enabled. <span class="hljs-keyword">Also</span>, report buffer <span class="hljs-keyword">read</span> <span class="hljs-keyword">and</span> dirty rates <span class="hljs-keyword">for</span> auto-<span class="hljs-keyword">analyze</span>.<br><br><span class="hljs-keyword">Add</span> information about the original <span class="hljs-keyword">user</span> <span class="hljs-type">name</span> supplied <span class="hljs-keyword">by</span> the client <span class="hljs-keyword">to</span> the output <span class="hljs-keyword">of</span> log_connections (Jacob Champion)<br></code></pre></td></tr></table></figure><h2 id="System-Views"><a href="#System-Views" class="headerlink" title="System Views"></a>System Views</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Add</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">view</span> pg_stat_progress_copy <span class="hljs-keyword">to</span> report <span class="hljs-keyword">COPY</span> progress (Josef Šimánek, Matthias van de Meent)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">view</span> pg_stat_wal <span class="hljs-keyword">to</span> report WAL activity (Masahiro Ikeda)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">view</span> pg_stat_replication_slots <span class="hljs-keyword">to</span> report <span class="hljs-keyword">replication</span> slot activity (Masahiko Sawada, Amit Kapila, Vignesh C)<br><br>The <span class="hljs-keyword">function</span> pg_stat_reset_replication_slot() resets slot <span class="hljs-keyword">statistics</span>.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">view</span> pg_backend_memory_contexts <span class="hljs-keyword">to</span> report <span class="hljs-keyword">session</span> memory <span class="hljs-keyword">usage</span> (Atsushi Torikoshi, Fujii Masao)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">function</span> pg_log_backend_memory_contexts() <span class="hljs-keyword">to</span> output the memory contexts <span class="hljs-keyword">of</span> arbitrary backends (Atsushi Torikoshi)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">session</span> <span class="hljs-keyword">statistics</span> <span class="hljs-keyword">to</span> the pg_stat_database <span class="hljs-keyword">system</span> <span class="hljs-keyword">view</span> (Laurenz Albe)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">columns</span> <span class="hljs-keyword">to</span> pg_prepared_statements <span class="hljs-keyword">to</span> report generic <span class="hljs-keyword">and</span> custom plan counts (Atsushi Torikoshi, Kyotaro Horiguchi)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">lock</span> wait <span class="hljs-keyword">start</span> <span class="hljs-type">time</span> <span class="hljs-keyword">to</span> pg_locks (Atsushi Torikoshi)<br><br>Make the archiver process visible <span class="hljs-keyword">in</span> pg_stat_activity (Kyotaro Horiguchi)<br><br><span class="hljs-keyword">Add</span> wait event WalReceiverExit <span class="hljs-keyword">to</span> report WAL receiver <span class="hljs-keyword">exit</span> wait <span class="hljs-type">time</span> (Fujii Masao)<br><br>Implement information <span class="hljs-keyword">schema</span> <span class="hljs-keyword">view</span> routine_column_usage <span class="hljs-keyword">to</span> track <span class="hljs-keyword">columns</span> referenced <span class="hljs-keyword">by</span> <span class="hljs-keyword">function</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">procedure</span> <span class="hljs-keyword">default</span> expressions (Peter Eisentraut)<br></code></pre></td></tr></table></figure><h2 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql">Allow an SSL certificate&#x27;s distinguished name (DN) to be matched for client certificate authentication (Andrew Dunstan)<br><br>The new pg_hba.conf option clientname=DN allows comparison <span class="hljs-keyword">with</span> certificate <span class="hljs-keyword">attributes</span> beyond the CN <span class="hljs-keyword">and</span> can be combined <span class="hljs-keyword">with</span> ident maps.<br><br><span class="hljs-keyword">Allow</span> pg_hba.conf <span class="hljs-keyword">and</span> pg_ident.conf <span class="hljs-keyword">records</span> <span class="hljs-keyword">to</span> span multiple <span class="hljs-keyword">lines</span> (Fabien Coelho)<br><br>A backslash <span class="hljs-keyword">at</span> the <span class="hljs-keyword">end</span> <span class="hljs-keyword">of</span> a line allows <span class="hljs-built_in">record</span> <span class="hljs-keyword">contents</span> <span class="hljs-keyword">to</span> be continued <span class="hljs-keyword">on</span> the <span class="hljs-keyword">next</span> line.<br><br><span class="hljs-keyword">Allow</span> the specification <span class="hljs-keyword">of</span> a certificate revocation <span class="hljs-keyword">list</span> (CRL) <span class="hljs-keyword">directory</span> (Kyotaro Horiguchi)<br><br>This <span class="hljs-keyword">is</span> controlled <span class="hljs-keyword">by</span> <span class="hljs-keyword">server</span> parameter ssl_crl_dir <span class="hljs-keyword">and</span> libpq <span class="hljs-keyword">connection</span> <span class="hljs-keyword">option</span> sslcrldir. Previously <span class="hljs-keyword">only</span> single CRL files could be specified.<br><br><span class="hljs-keyword">Allow</span> passwords <span class="hljs-keyword">of</span> an arbitrary <span class="hljs-keyword">length</span> (Tom Lane, Nathan Bossart)<br></code></pre></td></tr></table></figure><h2 id="Server-Configuration"><a href="#Server-Configuration" class="headerlink" title="Server Configuration"></a>Server Configuration</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">Add</span><span class="hljs-built_in"> server </span>parameter idle_session_timeout <span class="hljs-keyword">to</span> close idle sessions (Li Japin)<br><br>This is similar <span class="hljs-keyword">to</span> idle_in_transaction_session_timeout.<br><br>Change checkpoint_completion_target<span class="hljs-built_in"> default </span><span class="hljs-keyword">to</span> 0.9 (Stephen Frost)<br><br>The previous<span class="hljs-built_in"> default </span>was 0.5.<br><br>Allow %P <span class="hljs-keyword">in</span> log_line_prefix <span class="hljs-keyword">to</span> report the parallel<span class="hljs-built_in"> group </span>leader<span class="hljs-string">&#x27;s PID for a parallel worker (Justin Pryzby)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Allow unix_socket_directories to specify paths as individual, comma-separated quoted strings (Ian Lawrence Barwick)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Previously all the paths had to be in a single quoted string.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Allow startup allocation of dynamic shared memory (Thomas Munro)</span><br><span class="hljs-string"></span><br><span class="hljs-string">This is controlled by min_dynamic_shared_memory. This allows more use of huge pages.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Add server parameter huge_page_size to control the size of huge pages used on Linux (Odin Ugedal)</span><br></code></pre></td></tr></table></figure><h2 id="Streaming-Replication-and-Recovery"><a href="#Streaming-Replication-and-Recovery" class="headerlink" title="Streaming Replication and Recovery"></a>Streaming Replication and Recovery</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Allow standby servers <span class="hljs-keyword">to</span> be rewound via pg_rewind (Heikki Linnakangas)<br><br>Allow the restore_command setting <span class="hljs-keyword">to</span> be changed during a <span class="hljs-keyword">server</span> reload (Sergei Kornilov)<br><br>You can <span class="hljs-keyword">also</span> <span class="hljs-keyword">set</span> restore_command <span class="hljs-keyword">to</span> an empty string <span class="hljs-keyword">and</span> reload <span class="hljs-keyword">to</span> force recovery <span class="hljs-keyword">to</span> <span class="hljs-keyword">only</span> <span class="hljs-keyword">read</span> <span class="hljs-keyword">from</span> the pg_wal directory.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">server</span> parameter log_recovery_conflict_waits <span class="hljs-keyword">to</span> report long recovery <span class="hljs-keyword">conflict</span> wait times (Bertrand Drouvot, Masahiko Sawada)<br><br>Pause recovery <span class="hljs-keyword">on</span> a hot standby <span class="hljs-keyword">server</span> <span class="hljs-keyword">if</span> the <span class="hljs-keyword">primary</span> changes its parameters <span class="hljs-keyword">in</span> a way that prevents replay <span class="hljs-keyword">on</span> the standby (Peter Eisentraut)<br><br>Previously the standby would shut down immediately.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">function</span> pg_get_wal_replay_pause_state() <span class="hljs-keyword">to</span> report the recovery state (Dilip Kumar)<br><br>It gives more detailed information than pg_is_wal_replay_paused(), which still <span class="hljs-keyword">exists</span>.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-built_in">new</span> <span class="hljs-keyword">read</span>-<span class="hljs-keyword">only</span> <span class="hljs-keyword">server</span> parameter in_hot_standby (Haribabu Kommi, Greg Nancarrow, Tom Lane)<br><br>This allows clients <span class="hljs-keyword">to</span> easily detect whether they are connected <span class="hljs-keyword">to</span> a hot standby <span class="hljs-keyword">server</span>.<br><br>Speed truncation <span class="hljs-keyword">of</span> small <span class="hljs-keyword">tables</span> during recovery <span class="hljs-keyword">on</span> clusters <span class="hljs-keyword">with</span> a <span class="hljs-keyword">large</span> number <span class="hljs-keyword">of</span> shared <span class="hljs-keyword">buffers</span> (Kirk Jamison)<br><br>Allow file <span class="hljs-keyword">system</span> sync at the <span class="hljs-keyword">start</span> <span class="hljs-keyword">of</span> crash recovery <span class="hljs-keyword">on</span> Linux (Thomas Munro)<br><br><span class="hljs-keyword">By</span> <span class="hljs-keyword">default</span>, PostgreSQL opens <span class="hljs-keyword">and</span> fsyncs <span class="hljs-keyword">each</span> data file <span class="hljs-keyword">in</span> the <span class="hljs-keyword">database</span> <span class="hljs-keyword">cluster</span> at the <span class="hljs-keyword">start</span> <span class="hljs-keyword">of</span> crash recovery. A <span class="hljs-built_in">new</span> setting, recovery_init_sync_method=syncfs, <span class="hljs-keyword">instead</span> syncs <span class="hljs-keyword">each</span> filesystem used <span class="hljs-keyword">by</span> the <span class="hljs-keyword">cluster</span>. This allows <span class="hljs-keyword">for</span> faster recovery <span class="hljs-keyword">on</span> systems <span class="hljs-keyword">with</span> many <span class="hljs-keyword">database</span> files.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">function</span> pg_xact_commit_timestamp_origin() <span class="hljs-keyword">to</span> <span class="hljs-keyword">return</span> the <span class="hljs-keyword">commit</span> <span class="hljs-type">timestamp</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">replication</span> origin <span class="hljs-keyword">of</span> the specified <span class="hljs-keyword">transaction</span> (Movead Li)<br><br><span class="hljs-keyword">Add</span> the <span class="hljs-keyword">replication</span> origin <span class="hljs-keyword">to</span> the <span class="hljs-type">record</span> returned <span class="hljs-keyword">by</span> pg_last_committed_xact() (Movead Li)<br><br>Allow <span class="hljs-keyword">replication</span> origin <span class="hljs-keyword">functions</span> <span class="hljs-keyword">to</span> be controlled <span class="hljs-keyword">using</span> standard <span class="hljs-keyword">function</span> permission controls (Martín Marqués)<br><br>Previously these <span class="hljs-keyword">functions</span> could <span class="hljs-keyword">only</span> be executed <span class="hljs-keyword">by</span> superusers, <span class="hljs-keyword">and</span> this <span class="hljs-keyword">is</span> still the <span class="hljs-keyword">default</span>.<br></code></pre></td></tr></table></figure><p>E.3.3.2.1. Logical Replication</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sql">Allow logical replication to stream long in-progress transactions to subscribers (Dilip Kumar, Amit Kapila, Ajin Cherian, Tomas Vondra, Nikhil Sontakke, Stas Kelvich)<br><br>Previously transactions that exceeded logical_decoding_work_mem were written to disk until the transaction completed.<br><br>Enhance the logical replication API to allow streaming large in-progress transactions (Tomas Vondra, Dilip Kumar, Amit Kapila)<br><br>The output functions <span class="hljs-keyword">begin</span> <span class="hljs-keyword">with</span> stream. test_decoding also supports these.<br><br><span class="hljs-keyword">Allow</span> multiple transactions during <span class="hljs-keyword">table</span> <span class="hljs-keyword">sync</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">logical</span> <span class="hljs-keyword">replication</span> (Peter Smith, Amit Kapila, Takamichi Osumi)<br><br>Immediately WAL-<span class="hljs-keyword">log</span> subtransaction <span class="hljs-keyword">and</span> top-<span class="hljs-keyword">level</span> XID association (Tomas Vondra, Dilip Kumar, Amit Kapila)<br><br>This <span class="hljs-keyword">is</span> useful <span class="hljs-keyword">for</span> <span class="hljs-keyword">logical</span> decoding.<br><br>Enhance <span class="hljs-keyword">logical</span> decoding APIs <span class="hljs-keyword">to</span> handle two-phase commits (Ajin Cherian, Amit Kapila, Nikhil Sontakke, Stas Kelvich)<br><br>This <span class="hljs-keyword">is</span> controlled via pg_create_logical_replication_slot().<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">cache</span> invalidation messages <span class="hljs-keyword">to</span> the WAL during command completion <span class="hljs-keyword">when</span> <span class="hljs-keyword">using</span> <span class="hljs-keyword">logical</span> <span class="hljs-keyword">replication</span> (Dilip Kumar, Tomas Vondra, Amit Kapila)<br><br>This allows <span class="hljs-keyword">logical</span> streaming <span class="hljs-keyword">of</span> <span class="hljs-keyword">in</span>-progress transactions. <span class="hljs-keyword">When</span> <span class="hljs-keyword">logical</span> <span class="hljs-keyword">replication</span> <span class="hljs-keyword">is</span> disabled, invalidation messages <span class="hljs-keyword">are</span> <span class="hljs-keyword">generated</span> <span class="hljs-keyword">only</span> <span class="hljs-keyword">at</span> <span class="hljs-keyword">transaction</span> completion.<br><br><span class="hljs-keyword">Allow</span> <span class="hljs-keyword">logical</span> decoding <span class="hljs-keyword">to</span> more efficiently process <span class="hljs-keyword">cache</span> invalidation messages (Dilip Kumar)<br><br>This allows <span class="hljs-keyword">logical</span> decoding <span class="hljs-keyword">to</span> <span class="hljs-keyword">work</span> efficiently <span class="hljs-keyword">in</span> presence <span class="hljs-keyword">of</span> a <span class="hljs-keyword">large</span> amount <span class="hljs-keyword">of</span> DDL.<br><br><span class="hljs-keyword">Allow</span> control <span class="hljs-keyword">over</span> whether <span class="hljs-keyword">logical</span> decoding messages <span class="hljs-keyword">are</span> sent <span class="hljs-keyword">to</span> the <span class="hljs-keyword">replication</span> stream (David Pirotte, Euler Taveira)<br><br><span class="hljs-keyword">Allow</span> <span class="hljs-keyword">logical</span> <span class="hljs-keyword">replication</span> subscriptions <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span> <span class="hljs-built_in">binary</span> transfer <span class="hljs-keyword">mode</span> (Dave Cramer)<br><br>This <span class="hljs-keyword">is</span> faster <span class="hljs-keyword">than</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">mode</span>, but slightly <span class="hljs-keyword">less</span> robust.<br><br><span class="hljs-keyword">Allow</span> <span class="hljs-keyword">logical</span> decoding <span class="hljs-keyword">to</span> be filtered <span class="hljs-keyword">by</span> xid (Markus Wanner)<br></code></pre></td></tr></table></figure><h2 id="SELECT-INSERT"><a href="#SELECT-INSERT" class="headerlink" title="SELECT, INSERT"></a>SELECT, INSERT</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Reduce the number <span class="hljs-keyword">of</span> keywords that can<span class="hljs-string">&#x27;t be used as column labels without AS (Mark Dilger)</span><br><span class="hljs-string"></span><br><span class="hljs-string">There are now 90% fewer restricted keywords.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Allow an alias to be specified for JOIN&#x27;</span>s <span class="hljs-keyword">USING</span> clause (Peter Eisentraut)<br><br>The <span class="hljs-keyword">alias</span> <span class="hljs-keyword">is</span> created <span class="hljs-keyword">by</span> writing <span class="hljs-keyword">AS</span> <span class="hljs-keyword">after</span> the <span class="hljs-keyword">USING</span> clause. It can be used <span class="hljs-keyword">as</span> a <span class="hljs-keyword">table</span> qualification <span class="hljs-keyword">for</span> the merged <span class="hljs-keyword">USING</span> <span class="hljs-keyword">columns</span>.<br><br>Allow <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">to</span> be added <span class="hljs-keyword">to</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">to</span> remove duplicate GROUPING <span class="hljs-keyword">SET</span> combinations (Vik Fearing)<br><br><span class="hljs-keyword">For</span> example, <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">CUBE</span> (a,b), <span class="hljs-keyword">CUBE</span> (b,c) will generate duplicate grouping combinations <span class="hljs-keyword">without</span> <span class="hljs-keyword">DISTINCT</span>.<br><br>Properly handle <span class="hljs-keyword">DEFAULT</span> entries <span class="hljs-keyword">in</span> multi-<span class="hljs-keyword">row</span> <span class="hljs-keyword">VALUES</span> lists <span class="hljs-keyword">in</span> <span class="hljs-keyword">INSERT</span> (Dean Rasheed)<br><br>Such cases used <span class="hljs-keyword">to</span> throw an error.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">SQL</span>-standard <span class="hljs-keyword">SEARCH</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">CYCLE</span> clauses <span class="hljs-keyword">for</span> common <span class="hljs-keyword">table</span> expressions (Peter Eisentraut)<br><br>The same results could be accomplished <span class="hljs-keyword">using</span> existing syntax, but much less conveniently.<br><br>Allow <span class="hljs-keyword">column</span> names <span class="hljs-keyword">in</span> the <span class="hljs-keyword">WHERE</span> clause <span class="hljs-keyword">of</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">CONFLICT</span> <span class="hljs-keyword">to</span> be <span class="hljs-keyword">table</span>-qualified (Tom Lane)<br><br><span class="hljs-keyword">Only</span> the target <span class="hljs-keyword">table</span> can be referenced, however.<br></code></pre></td></tr></table></figure><h2 id="Utility-Commands"><a href="#Utility-Commands" class="headerlink" title="Utility Commands"></a>Utility Commands</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs sql">Allow REFRESH MATERIALIZED VIEW to <span class="hljs-keyword">use</span> parallelism (Bharath Rupireddy)<br><br><span class="hljs-keyword">Allow</span> REINDEX <span class="hljs-keyword">to</span> <span class="hljs-keyword">change</span> the <span class="hljs-keyword">tablespace</span> <span class="hljs-keyword">of</span> the <span class="hljs-keyword">new</span> <span class="hljs-keyword">index</span> (Alexey Kondratov, Michael Paquier, Justin Pryzby)<br><br>This <span class="hljs-keyword">is</span> done <span class="hljs-keyword">by</span> specifying a <span class="hljs-keyword">TABLESPACE</span> clause. A <span class="hljs-comment">--tablespace option was also added to reindexdb to control this.</span><br><br><span class="hljs-keyword">Allow</span> REINDEX <span class="hljs-keyword">to</span> process <span class="hljs-keyword">all</span> <span class="hljs-keyword">child</span> <span class="hljs-keyword">tables</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">indexes</span> <span class="hljs-keyword">of</span> a partitioned relation (Justin Pryzby, Michael Paquier)<br><br><span class="hljs-keyword">Allow</span> <span class="hljs-keyword">index</span> commands <span class="hljs-keyword">using</span> CONCURRENTLY <span class="hljs-keyword">to</span> avoid waiting <span class="hljs-keyword">for</span> the completion <span class="hljs-keyword">of</span> other <span class="hljs-keyword">operations</span> <span class="hljs-keyword">using</span> CONCURRENTLY (Álvaro Herrera)<br><br>Improve the <span class="hljs-keyword">performance</span> <span class="hljs-keyword">of</span> COPY <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">binary</span> <span class="hljs-keyword">mode</span> (Bharath Rupireddy, Amit Langote)<br><br><span class="hljs-keyword">Preserve</span> <span class="hljs-keyword">SQL</span> standard syntax <span class="hljs-keyword">for</span> <span class="hljs-keyword">SQL</span>-defined functions <span class="hljs-keyword">in</span> <span class="hljs-keyword">view</span> definitions (Tom Lane)<br><br>Previously, calls <span class="hljs-keyword">to</span> <span class="hljs-keyword">SQL</span>-standard functions such <span class="hljs-keyword">as</span> <span class="hljs-keyword">EXTRACT</span>() were shown <span class="hljs-keyword">in</span> plain <span class="hljs-keyword">function</span>-<span class="hljs-keyword">call</span> syntax. The original syntax <span class="hljs-keyword">is</span> <span class="hljs-keyword">now</span> preserved <span class="hljs-keyword">when</span> displaying a <span class="hljs-keyword">view</span> <span class="hljs-keyword">or</span> rule.<br><br><span class="hljs-keyword">Add</span> the <span class="hljs-keyword">SQL</span>-standard clause GRANTED <span class="hljs-keyword">BY</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">REVOKE</span> (Peter Eisentraut)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">option</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> (Takamichi Osumi)<br><br>This allows pre-existing <span class="hljs-keyword">triggers</span> <span class="hljs-keyword">to</span> be conditionally replaced.<br><br><span class="hljs-keyword">Allow</span> <span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">to</span> operate <span class="hljs-keyword">on</span> <span class="hljs-keyword">foreign</span> <span class="hljs-keyword">tables</span> (Kazutaka Onishi, Kohei KaiGai)<br><br>The postgres_fdw <span class="hljs-keyword">module</span> also <span class="hljs-keyword">now</span> supports this.<br><br><span class="hljs-keyword">Allow</span> publications <span class="hljs-keyword">to</span> be more easily added <span class="hljs-keyword">to</span> <span class="hljs-keyword">and</span> removed <span class="hljs-keyword">from</span> a subscription (Japin Li)<br><br>The <span class="hljs-keyword">new</span> syntax <span class="hljs-keyword">is</span> <span class="hljs-keyword">ALTER</span> SUBSCRIPTION ... <span class="hljs-keyword">ADD</span>/<span class="hljs-keyword">DROP</span> PUBLICATION. This avoids <span class="hljs-keyword">having</span> <span class="hljs-keyword">to</span> specify <span class="hljs-keyword">all</span> publications <span class="hljs-keyword">to</span> <span class="hljs-keyword">add</span>/remove entries.<br><br><span class="hljs-keyword">Add</span> primary <span class="hljs-keyword">keys</span>, <span class="hljs-keyword">unique</span> <span class="hljs-keyword">constraints</span>, <span class="hljs-keyword">and</span> <span class="hljs-keyword">foreign</span> <span class="hljs-keyword">keys</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">system</span> catalogs (Peter Eisentraut)<br><br>These changes <span class="hljs-keyword">help</span> GUI tools <span class="hljs-keyword">analyze</span> the <span class="hljs-keyword">system</span> catalogs. The existing <span class="hljs-keyword">unique</span> <span class="hljs-keyword">indexes</span> <span class="hljs-keyword">of</span> catalogs <span class="hljs-keyword">now</span> have associated <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">or</span> PRIMARY <span class="hljs-keyword">KEY</span> constraints. <span class="hljs-keyword">Foreign</span> <span class="hljs-keyword">key</span> relationships <span class="hljs-keyword">are</span> <span class="hljs-keyword">not</span> actually <span class="hljs-keyword">stored</span> <span class="hljs-keyword">or</span> implemented <span class="hljs-keyword">as</span> <span class="hljs-keyword">constraints</span>, but can be obtained <span class="hljs-keyword">for</span> display <span class="hljs-keyword">from</span> the <span class="hljs-keyword">function</span> pg_get_catalog_foreign_keys().<br><br><span class="hljs-keyword">Allow</span> CURRENT_ROLE every place <span class="hljs-keyword">CURRENT_USER</span> <span class="hljs-keyword">is</span> accepted (Peter Eisentraut)<br></code></pre></td></tr></table></figure><h2 id="Data-Types"><a href="#Data-Types" class="headerlink" title="Data Types"></a>Data Types</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Allow extensions <span class="hljs-keyword">and</span> built-<span class="hljs-keyword">in</span> data <span class="hljs-keyword">types</span> <span class="hljs-keyword">to</span> implement subscripting (Dmitry Dolgov)<br><br>Previously subscript handling was hard-coded <span class="hljs-keyword">into</span> the <span class="hljs-keyword">server</span>, so that subscripting could <span class="hljs-keyword">only</span> be applied <span class="hljs-keyword">to</span> <span class="hljs-keyword">array</span> <span class="hljs-keyword">types</span>. This change allows subscript notation <span class="hljs-keyword">to</span> be used <span class="hljs-keyword">to</span> extract <span class="hljs-keyword">or</span> assign portions <span class="hljs-keyword">of</span> a <span class="hljs-keyword">value</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">any</span> <span class="hljs-keyword">type</span> <span class="hljs-keyword">for</span> which the concept makes sense.<br><br>Allow subscripting <span class="hljs-keyword">of</span> <span class="hljs-type">JSONB</span> (Dmitry Dolgov)<br><br><span class="hljs-type">JSONB</span> subscripting can be used <span class="hljs-keyword">to</span> extract <span class="hljs-keyword">and</span> assign <span class="hljs-keyword">to</span> portions <span class="hljs-keyword">of</span> <span class="hljs-type">JSONB</span> documents.<br><br><span class="hljs-keyword">Add</span> support <span class="hljs-keyword">for</span> multirange data <span class="hljs-keyword">types</span> (Paul Jungwirth, Alexander Korotkov)<br><br>These are <span class="hljs-keyword">like</span> range data <span class="hljs-keyword">types</span>, but they allow the specification <span class="hljs-keyword">of</span> multiple, ordered, non-overlapping ranges. An associated multirange <span class="hljs-keyword">type</span> <span class="hljs-keyword">is</span> automatically created <span class="hljs-keyword">for</span> every range <span class="hljs-keyword">type</span>.<br><br><span class="hljs-keyword">Add</span> support <span class="hljs-keyword">for</span> the stemming <span class="hljs-keyword">of</span> languages Armenian, Basque, Catalan, Hindi, Serbian, <span class="hljs-keyword">and</span> Yiddish (Peter Eisentraut)<br><br>Allow tsearch data files <span class="hljs-keyword">to</span> have unlimited <span class="hljs-type">line</span> lengths (Tom Lane)<br><br>The previous <span class="hljs-keyword">limit</span> was <span class="hljs-number">4</span>K bytes. <span class="hljs-keyword">Also</span> remove <span class="hljs-keyword">function</span> t_readline().<br><br><span class="hljs-keyword">Add</span> support <span class="hljs-keyword">for</span> <span class="hljs-keyword">Infinity</span> <span class="hljs-keyword">and</span> -<span class="hljs-keyword">Infinity</span> <span class="hljs-keyword">values</span> <span class="hljs-keyword">in</span> the <span class="hljs-type">numeric</span> data <span class="hljs-keyword">type</span> (Tom Lane)<br><br>Floating-<span class="hljs-type">point</span> data <span class="hljs-keyword">types</span> already supported these.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-type">point</span> operators &lt;&lt;| <span class="hljs-keyword">and</span> |&gt;&gt; representing strictly above/below tests (Emre Hasegeli)<br><br>Previously these were <span class="hljs-keyword">called</span> &gt;^ <span class="hljs-keyword">and</span> &lt;^, but that naming <span class="hljs-keyword">is</span> inconsistent <span class="hljs-keyword">with</span> other geometric data <span class="hljs-keyword">types</span>. The <span class="hljs-built_in">old</span> names remain available, but may someday be removed.<br><br><span class="hljs-keyword">Add</span> operators <span class="hljs-keyword">to</span> <span class="hljs-keyword">add</span> <span class="hljs-keyword">and</span> subtract LSN <span class="hljs-keyword">and</span> <span class="hljs-type">numeric</span> (byte) <span class="hljs-keyword">values</span> (Fujii Masao)<br><br>Allow binary data transfer <span class="hljs-keyword">to</span> be more forgiving <span class="hljs-keyword">of</span> <span class="hljs-keyword">array</span> <span class="hljs-keyword">and</span> <span class="hljs-type">record</span> <span class="hljs-type">OID</span> mismatches (Tom Lane)<br><br><span class="hljs-keyword">Create</span> composite <span class="hljs-keyword">array</span> <span class="hljs-keyword">types</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">system</span> catalogs (Wenjing Zeng)<br><br><span class="hljs-keyword">User</span>-defined relations have long had composite <span class="hljs-keyword">types</span> associated <span class="hljs-keyword">with</span> them, <span class="hljs-keyword">and</span> <span class="hljs-keyword">also</span> <span class="hljs-keyword">array</span> <span class="hljs-keyword">types</span> <span class="hljs-keyword">over</span> those composite <span class="hljs-keyword">types</span>. <span class="hljs-keyword">System</span> catalogs now <span class="hljs-keyword">do</span> <span class="hljs-keyword">as</span> well. This change <span class="hljs-keyword">also</span> fixes an inconsistency that creating a <span class="hljs-keyword">user</span>-defined <span class="hljs-keyword">table</span> <span class="hljs-keyword">in</span> single-<span class="hljs-keyword">user</span> mode would fail <span class="hljs-keyword">to</span> <span class="hljs-keyword">create</span> a composite <span class="hljs-keyword">array</span> <span class="hljs-keyword">type</span>.<br></code></pre></td></tr></table></figure><h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Allow <span class="hljs-keyword">SQL</span>-<span class="hljs-keyword">language</span> <span class="hljs-keyword">functions</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">procedures</span> <span class="hljs-keyword">to</span> use <span class="hljs-keyword">SQL</span>-standard <span class="hljs-keyword">function</span> bodies (Peter Eisentraut)<br><br>Previously <span class="hljs-keyword">only</span> string-literal <span class="hljs-keyword">function</span> bodies were supported. <span class="hljs-keyword">When</span> writing a <span class="hljs-keyword">function</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">procedure</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">SQL</span>-standard syntax, the body <span class="hljs-keyword">is</span> parsed immediately <span class="hljs-keyword">and</span> stored <span class="hljs-keyword">as</span> a parse tree. This allows better tracking <span class="hljs-keyword">of</span> <span class="hljs-keyword">function</span> dependencies, <span class="hljs-keyword">and</span> can have <span class="hljs-keyword">security</span> benefits.<br><br>Allow <span class="hljs-keyword">procedures</span> <span class="hljs-keyword">to</span> have <span class="hljs-keyword">OUT</span> parameters (Peter Eisentraut)<br><br>Allow <span class="hljs-keyword">some</span> <span class="hljs-keyword">array</span> <span class="hljs-keyword">functions</span> <span class="hljs-keyword">to</span> operate <span class="hljs-keyword">on</span> a mix <span class="hljs-keyword">of</span> compatible data <span class="hljs-keyword">types</span> (Tom Lane)<br><br>The <span class="hljs-keyword">functions</span> array_append(), array_prepend(), array_cat(), array_position(), array_positions(), array_remove(), array_replace(), <span class="hljs-keyword">and</span> width_bucket() now take anycompatiblearray <span class="hljs-keyword">instead</span> <span class="hljs-keyword">of</span> <span class="hljs-type">anyarray</span> arguments. This makes them less fussy about exact matches <span class="hljs-keyword">of</span> argument <span class="hljs-keyword">types</span>.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">SQL</span>-standard trim_array() <span class="hljs-keyword">function</span> (Vik Fearing)<br><br>This could already be done <span class="hljs-keyword">with</span> <span class="hljs-keyword">array</span> slices, but less easily.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-type">bytea</span> equivalents <span class="hljs-keyword">of</span> ltrim() <span class="hljs-keyword">and</span> rtrim() (Joel Jacobson)<br><br>Support negative indexes <span class="hljs-keyword">in</span> split_part() (Nikhil Benesch)<br><br>Negative <span class="hljs-keyword">values</span> <span class="hljs-keyword">start</span> <span class="hljs-keyword">from</span> the last field <span class="hljs-keyword">and</span> count backward.<br><br><span class="hljs-keyword">Add</span> string_to_table() <span class="hljs-keyword">function</span> <span class="hljs-keyword">to</span> split a string <span class="hljs-keyword">on</span> delimiters (Pavel Stehule)<br><br>This <span class="hljs-keyword">is</span> <span class="hljs-keyword">similar</span> <span class="hljs-keyword">to</span> the regexp_split_to_table() <span class="hljs-keyword">function</span>.<br><br><span class="hljs-keyword">Add</span> unistr() <span class="hljs-keyword">function</span> <span class="hljs-keyword">to</span> allow Unicode characters <span class="hljs-keyword">to</span> be specified <span class="hljs-keyword">as</span> backslash-hex escapes <span class="hljs-keyword">in</span> strings (Pavel Stehule)<br><br>This <span class="hljs-keyword">is</span> <span class="hljs-keyword">similar</span> <span class="hljs-keyword">to</span> how Unicode can be specified <span class="hljs-keyword">in</span> literal strings.<br><br><span class="hljs-keyword">Add</span> bit_xor() XOR <span class="hljs-keyword">aggregate</span> <span class="hljs-keyword">function</span> (Alexey Bashtanov)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">function</span> bit_count() <span class="hljs-keyword">to</span> <span class="hljs-keyword">return</span> the number <span class="hljs-keyword">of</span> bits <span class="hljs-keyword">set</span> <span class="hljs-keyword">in</span> a <span class="hljs-type">bit</span> <span class="hljs-keyword">or</span> byte string (David Fetter)<br><br><span class="hljs-keyword">Add</span> date_bin() <span class="hljs-keyword">function</span> (John Naylor)<br><br>This <span class="hljs-keyword">function</span> “bins” <span class="hljs-keyword">input</span> timestamps, grouping them <span class="hljs-keyword">into</span> intervals <span class="hljs-keyword">of</span> a uniform length aligned <span class="hljs-keyword">with</span> a specified origin.<br><br>Allow make_timestamp()/make_timestamptz() <span class="hljs-keyword">to</span> accept negative years (Peter Eisentraut)<br><br>Negative <span class="hljs-keyword">values</span> are interpreted <span class="hljs-keyword">as</span> BC years.<br><br><span class="hljs-keyword">Add</span> newer regular expression substring() syntax (Peter Eisentraut)<br><br>The <span class="hljs-built_in">new</span> <span class="hljs-keyword">SQL</span>-standard syntax <span class="hljs-keyword">is</span> SUBSTRING(<span class="hljs-type">text</span> <span class="hljs-keyword">SIMILAR</span> pattern <span class="hljs-keyword">ESCAPE</span> escapechar). The previous standard syntax was SUBSTRING(<span class="hljs-type">text</span> <span class="hljs-keyword">FROM</span> pattern <span class="hljs-keyword">FOR</span> escapechar), which <span class="hljs-keyword">is</span> still accepted <span class="hljs-keyword">by</span> PostgreSQL.<br><br>Allow complemented <span class="hljs-type">character</span> <span class="hljs-keyword">class</span> escapes \D, \S, <span class="hljs-keyword">and</span> \W <span class="hljs-keyword">within</span> regular expression brackets (Tom Lane)<br><br><span class="hljs-keyword">Add</span> [[:word:]] <span class="hljs-keyword">as</span> a regular expression <span class="hljs-type">character</span> <span class="hljs-keyword">class</span>, equivalent <span class="hljs-keyword">to</span> \w (Tom Lane)<br><br>Allow more flexible data <span class="hljs-keyword">types</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">values</span> <span class="hljs-keyword">of</span> lead() <span class="hljs-keyword">and</span> lag() <span class="hljs-keyword">window</span> <span class="hljs-keyword">functions</span> (Vik Fearing)<br><br>Make non-zero floating-<span class="hljs-type">point</span> <span class="hljs-keyword">values</span> divided <span class="hljs-keyword">by</span> <span class="hljs-keyword">infinity</span> <span class="hljs-keyword">return</span> zero (Kyotaro Horiguchi)<br><br>Previously such operations produced underflow errors.<br><br>Make floating-<span class="hljs-type">point</span> division <span class="hljs-keyword">of</span> <span class="hljs-keyword">NaN</span> <span class="hljs-keyword">by</span> zero <span class="hljs-keyword">return</span> <span class="hljs-keyword">NaN</span> (Tom Lane)<br><br>Previously this returned an error.<br><br>Cause exp() <span class="hljs-keyword">and</span> power() <span class="hljs-keyword">for</span> negative-<span class="hljs-keyword">infinity</span> exponents <span class="hljs-keyword">to</span> <span class="hljs-keyword">return</span> zero (Tom Lane)<br><br>Previously they often returned underflow errors.<br><br>Improve the accuracy <span class="hljs-keyword">of</span> geometric computations involving <span class="hljs-keyword">infinity</span> (Tom Lane)<br><br>Mark built-<span class="hljs-keyword">in</span> <span class="hljs-keyword">type</span> coercion <span class="hljs-keyword">functions</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">leakproof</span> <span class="hljs-keyword">where</span> possible (Tom Lane)<br><br>This allows more use <span class="hljs-keyword">of</span> <span class="hljs-keyword">functions</span> that require <span class="hljs-keyword">type</span> <span class="hljs-keyword">conversion</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">security</span>-sensitive situations.<br><br>Change pg_describe_object(), pg_identify_object(), <span class="hljs-keyword">and</span> pg_identify_object_as_address() <span class="hljs-keyword">to</span> <span class="hljs-keyword">always</span> report helpful error messages <span class="hljs-keyword">for</span> non-existent objects (Michael Paquier)<br></code></pre></td></tr></table></figure><h2 id="PL-pgSQL"><a href="#PL-pgSQL" class="headerlink" title="PL/pgSQL"></a>PL/pgSQL</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs smali">Improve PL/pgSQL&#x27;s expression<span class="hljs-built_in"> and </span>assignment parsing (Tom Lane)<br><br>This change allows assignment to<span class="hljs-built_in"> array </span>slices<span class="hljs-built_in"> and </span>nested record fields.<br><br>Allow plpgsql&#x27;s RETURN QUERY to<span class="hljs-built_in"> execute </span>its query using parallelism (Tom Lane)<br><br>Improve performance of repeated CALLs within plpgsql procedures (Pavel Stehule, Tom Lane)<br></code></pre></td></tr></table></figure><h2 id="Client-Interfaces"><a href="#Client-Interfaces" class="headerlink" title="Client Interfaces"></a>Client Interfaces</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">Add</span> pipeline mode <span class="hljs-keyword">to</span> libpq (Craig Ringer, Matthieu Garrigues, Álvaro Herrera)<br><br>This allows multiple queries <span class="hljs-keyword">to</span> be sent, only waiting <span class="hljs-keyword">for</span> completion when a specific synchronization message is sent.<br><br>Enhance libpq<span class="hljs-string">&#x27;s target_session_attrs parameter options (Haribabu Kommi, Greg Nancarrow, Vignesh C, Tom Lane)</span><br><span class="hljs-string"></span><br><span class="hljs-string">The new options are read-only, primary, standby, and prefer-standby.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Improve the output format of libpq&#x27;</span>s PQtrace() (Aya Iwata, Álvaro Herrera)<br><br>Allow an ECPG SQL identifier <span class="hljs-keyword">to</span> be linked <span class="hljs-keyword">to</span> a specific<span class="hljs-built_in"> connection </span>(Hayato Kuroda)<br><br>This is done via DECLARE <span class="hljs-built_in">..</span>. STATEMENT.<br></code></pre></td></tr></table></figure><h2 id="Client-Applications"><a href="#Client-Applications" class="headerlink" title="Client Applications"></a>Client Applications</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Allow vacuumdb <span class="hljs-keyword">to</span> skip <span class="hljs-keyword">index</span> cleanup <span class="hljs-keyword">and</span> truncation (Nathan Bossart)<br><br>The <span class="hljs-keyword">options</span> are <span class="hljs-comment">--no-index-cleanup and --no-truncate.</span><br><br>Allow pg_dump <span class="hljs-keyword">to</span> dump <span class="hljs-keyword">only</span> certain extensions (Guillaume Lelarge)<br><br>This <span class="hljs-keyword">is</span> controlled <span class="hljs-keyword">by</span> <span class="hljs-keyword">option</span> <span class="hljs-comment">--extension.</span><br><br><span class="hljs-keyword">Add</span> pgbench permute() <span class="hljs-keyword">function</span> <span class="hljs-keyword">to</span> randomly shuffle <span class="hljs-keyword">values</span> (Fabien Coelho, Hironobu Suzuki, Dean Rasheed)<br><br><span class="hljs-keyword">Include</span> disconnection times <span class="hljs-keyword">in</span> the reconnection overhead measured <span class="hljs-keyword">by</span> pgbench <span class="hljs-keyword">with</span> -C (Yugo Nagata)<br><br>Allow multiple <span class="hljs-keyword">verbose</span> <span class="hljs-keyword">option</span> specifications (-v) <span class="hljs-keyword">to</span> increase the logging verbosity (Tom Lane)<br><br>This behavior <span class="hljs-keyword">is</span> supported <span class="hljs-keyword">by</span> pg_dump, pg_dumpall, <span class="hljs-keyword">and</span> pg_restore.<br></code></pre></td></tr></table></figure><h2 id="psql"><a href="#psql" class="headerlink" title="psql"></a>psql</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs smali">Allow psql&#x27;s \df<span class="hljs-built_in"> and </span>\do commands to specify function<span class="hljs-built_in"> and </span>operator argument types (Greg Sabino Mullane, Tom Lane)<br><br>This helps reduce the number of matches printed for overloaded names.<br><br>Add an access method column to psql&#x27;s \d[i|m|t]+ output (Georgios Kokolatos)<br><br>Allow psql&#x27;s \dt<span class="hljs-built_in"> and </span>\di to show TOAST tables<span class="hljs-built_in"> and </span>their indexes (Justin Pryzby)<br><br>Add psql command \dX to list extended statistics objects (Tatsuro Yamada)<br><br>Fix psql&#x27;s \dT to understand<span class="hljs-built_in"> array </span>syntax<span class="hljs-built_in"> and </span>backend grammar aliases, like<span class="hljs-built_in"> int </span>for integer (Greg Sabino Mullane, Tom Lane)<br><br>When editing the previous query<span class="hljs-built_in"> or </span>a file with psql&#x27;s \e,<span class="hljs-built_in"> or </span>using \ef<span class="hljs-built_in"> and </span>\ev, ignore the results<span class="hljs-built_in"> if </span>the editor exits without saving (Laurenz Albe)<br><br>Previously, such edits would load the previous query into the query buffer,<span class="hljs-built_in"> and </span>typically<span class="hljs-built_in"> execute </span>it immediately. This was deemed to be probably<span class="hljs-built_in"> not </span>what the user wants.<br><br>Improve tab completion (Vignesh C, Michael Paquier, Justin Pryzby, Georgios Kokolatos, Julien Rouhaud)<br></code></pre></td></tr></table></figure><p>E.3.3.10. Server Applications</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Add</span> command-<span class="hljs-type">line</span> utility pg_amcheck <span class="hljs-keyword">to</span> simplify running contrib/amcheck tests <span class="hljs-keyword">on</span> many relations (Mark Dilger)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-comment">--no-instructions option to initdb (Magnus Hagander)</span><br><br>This suppresses the <span class="hljs-keyword">server</span> startup instructions that are normally printed.<br><br>Stop pg_upgrade <span class="hljs-keyword">from</span> creating analyze_new_cluster script (Magnus Hagander)<br><br><span class="hljs-keyword">Instead</span>, give comparable vacuumdb instructions.<br><br>Remove support <span class="hljs-keyword">for</span> the postmaster -o <span class="hljs-keyword">option</span> (Magnus Hagander)<br><br>This <span class="hljs-keyword">option</span> was unnecessary since <span class="hljs-keyword">all</span> passed <span class="hljs-keyword">options</span> could already be specified directly.<br></code></pre></td></tr></table></figure><p>E.3.3.11. Documentation</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Rename</span> <span class="hljs-string">&quot;Default Roles&quot;</span> <span class="hljs-keyword">to</span> <span class="hljs-string">&quot;Predefined Roles&quot;</span> (Bruce Momjian, Stephen Frost)<br><br><span class="hljs-keyword">Add</span> documentation <span class="hljs-keyword">for</span> the factorial() <span class="hljs-keyword">function</span> (Peter Eisentraut)<br><br><span class="hljs-keyword">With</span> the removal <span class="hljs-keyword">of</span> the ! <span class="hljs-keyword">operator</span> <span class="hljs-keyword">in</span> this <span class="hljs-keyword">release</span>, factorial() <span class="hljs-keyword">is</span> the <span class="hljs-keyword">only</span> built-<span class="hljs-keyword">in</span> way <span class="hljs-keyword">to</span> <span class="hljs-keyword">compute</span> a factorial.<br></code></pre></td></tr></table></figure><h2 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Add</span> configure <span class="hljs-keyword">option</span> <span class="hljs-comment">--with-ssl=&#123;openssl&#125; to allow future choice of the SSL library to use (Daniel Gustafsson, Michael Paquier)</span><br><br>The spelling <span class="hljs-comment">--with-openssl is kept for compatibility.</span><br><br><span class="hljs-keyword">Add</span> support <span class="hljs-keyword">for</span> abstract Unix-<span class="hljs-keyword">domain</span> sockets (Peter Eisentraut)<br><br>This <span class="hljs-keyword">is</span> currently supported <span class="hljs-keyword">on</span> Linux <span class="hljs-keyword">and</span> Windows.<br><br>Allow Windows <span class="hljs-keyword">to</span> properly handle files larger than four gigabytes (Juan José Santamaría Flecha)<br><br><span class="hljs-keyword">For</span> example this allows <span class="hljs-keyword">COPY</span>, WAL files, <span class="hljs-keyword">and</span> relation segment files <span class="hljs-keyword">to</span> be larger than four gigabytes.<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">server</span> parameter debug_discard_caches <span class="hljs-keyword">to</span> control <span class="hljs-keyword">cache</span> flushing for test purposes (Craig Ringer)<br><br>Previously this behavior could only be set at compile time. To invoke it during initdb, use the new option --discard-caches.<br><br>Various improvements in valgrind error detection ability (Álvaro Herrera, Peter Geoghegan)<br><br>Add a test module for the regular expression package (Tom Lane)<br><br>Add support for LLVM version <span class="hljs-number">12</span> (Andres Freund)<br><br>Change SHA1, SHA2, <span class="hljs-keyword">and</span> MD5 hash computations <span class="hljs-keyword">to</span> use the OpenSSL EVP API (Michael Paquier)<br><br>This <span class="hljs-keyword">is</span> more modern <span class="hljs-keyword">and</span> supports FIPS mode.<br><br>Remove separate build-<span class="hljs-type">time</span> control <span class="hljs-keyword">over</span> the choice <span class="hljs-keyword">of</span> random number generator (Daniel Gustafsson)<br><br>    This <span class="hljs-keyword">is</span> now <span class="hljs-keyword">always</span> determined <span class="hljs-keyword">by</span> the choice <span class="hljs-keyword">of</span> SSL library.<br><br><span class="hljs-keyword">Add</span> direct <span class="hljs-keyword">conversion</span> <span class="hljs-keyword">routines</span> <span class="hljs-keyword">between</span> EUC_TW <span class="hljs-keyword">and</span> Big5 encodings (Heikki Linnakangas)<br><br><span class="hljs-keyword">Add</span> <span class="hljs-keyword">collation</span> <span class="hljs-keyword">version</span> support <span class="hljs-keyword">for</span> FreeBSD (Thomas Munro)<br><br><span class="hljs-keyword">Add</span> amadjustmembers <span class="hljs-keyword">to</span> the <span class="hljs-keyword">index</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">method</span> API (Tom Lane)<br><br>This allows an <span class="hljs-keyword">index</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">method</span> <span class="hljs-keyword">to</span> provide validity checking during creation <span class="hljs-keyword">of</span> a <span class="hljs-built_in">new</span> <span class="hljs-keyword">operator</span> <span class="hljs-keyword">class</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">family</span>.<br><br>Provide feature-test macros <span class="hljs-keyword">in</span> libpq-fe.h <span class="hljs-keyword">for</span> recently-added libpq features (Tom Lane, Álvaro Herrera)<br><br>Historically, applications have usually used compile-<span class="hljs-type">time</span> checks <span class="hljs-keyword">of</span> PG_VERSION_NUM <span class="hljs-keyword">to</span> test whether a feature <span class="hljs-keyword">is</span> available. But that<span class="hljs-string">&#x27;s normally the server version, which might not be a good guide to libpq&#x27;</span>s <span class="hljs-keyword">version</span>. libpq-fe.h now offers #define symbols denoting application-visible features added <span class="hljs-keyword">in</span> v14; the intent <span class="hljs-keyword">is</span> <span class="hljs-keyword">to</span> keep adding symbols <span class="hljs-keyword">for</span> such features <span class="hljs-keyword">in</span> future versions.<br></code></pre></td></tr></table></figure><h2 id="Additional-Modules"><a href="#Additional-Modules" class="headerlink" title="Additional Modules"></a>Additional Modules</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Allow subscripting <span class="hljs-keyword">of</span> hstore <span class="hljs-keyword">values</span> (Tom Lane, Dmitry Dolgov)<br><br>Allow GiST/GIN pg_trgm indexes <span class="hljs-keyword">to</span> <span class="hljs-keyword">do</span> equality lookups (Julien Rouhaud)<br><br>This <span class="hljs-keyword">is</span> <span class="hljs-keyword">similar</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">LIKE</span> <span class="hljs-keyword">except</span> <span class="hljs-keyword">no</span> wildcards are honored.<br><br>Allow the <span class="hljs-keyword">cube</span> data <span class="hljs-keyword">type</span> <span class="hljs-keyword">to</span> be transferred <span class="hljs-keyword">in</span> binary mode (KaiGai Kohei)<br><br>Allow pgstattuple_approx() <span class="hljs-keyword">to</span> report <span class="hljs-keyword">on</span> TOAST <span class="hljs-keyword">tables</span> (Peter Eisentraut)<br><br><span class="hljs-keyword">Add</span> contrib module pg_surgery which allows changes <span class="hljs-keyword">to</span> <span class="hljs-keyword">row</span> visibility (Ashutosh Sharma)<br><br>This <span class="hljs-keyword">is</span> useful <span class="hljs-keyword">for</span> correcting <span class="hljs-keyword">database</span> corruption.<br><br><span class="hljs-keyword">Add</span> contrib module old_snapshot <span class="hljs-keyword">to</span> report the XID/<span class="hljs-type">time</span> <span class="hljs-keyword">mapping</span> used <span class="hljs-keyword">by</span> an active old_snapshot_threshold (Robert Haas)<br><br>Allow amcheck <span class="hljs-keyword">to</span> <span class="hljs-keyword">also</span> <span class="hljs-keyword">check</span> heap pages (Mark Dilger)<br><br>Previously it <span class="hljs-keyword">only</span> checked B-Tree <span class="hljs-keyword">index</span> pages.<br><br>Allow pageinspect <span class="hljs-keyword">to</span> inspect GiST indexes (Andrey Borodin, Heikki Linnakangas)<br><br>Change pageinspect block numbers <span class="hljs-keyword">to</span> be bigints (Peter Eisentraut)<br><br>Mark btree_gist <span class="hljs-keyword">functions</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">parallel safe</span> (Steven Winfield)<br></code></pre></td></tr></table></figure><h2 id="pg-stat-statements"><a href="#pg-stat-statements" class="headerlink" title="pg_stat_statements"></a>pg_stat_statements</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Move query hash computation <span class="hljs-keyword">from</span> pg_stat_statements <span class="hljs-keyword">to</span> the core<span class="hljs-built_in"> server </span>(Julien Rouhaud)<br><br>The new<span class="hljs-built_in"> server </span>parameter compute_query_id<span class="hljs-string">&#x27;s default of auto will automatically enable query id computation when this extension is loaded.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Cause pg_stat_statements to track top and nested statements separately (Julien Rohaud)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Previously, when tracking all statements, identical top and nested statements were tracked as a single entry; but it seems more useful to separate such usages.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Add row counts for utility commands to pg_stat_statements (Fujii Masao, Katsuragi Yuta, Seino Yuki)</span><br><span class="hljs-string"></span><br><span class="hljs-string">Add pg_stat_statements_info system view to show pg_stat_statements activity (Katsuragi Yuta, Yuki Seino, Naoki Nakamichi)</span><br></code></pre></td></tr></table></figure><h2 id="postgres-fdw"><a href="#postgres-fdw" class="headerlink" title="postgres_fdw"></a>postgres_fdw</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql">Allow postgres_fdw to <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">bulk</span> (Takayuki Tsunakawa, Tomas Vondra, Amit Langote)<br><br><span class="hljs-keyword">Allow</span> postgres_fdw <span class="hljs-keyword">to</span> <span class="hljs-keyword">import</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">partitions</span> <span class="hljs-keyword">if</span> specified <span class="hljs-keyword">by</span> <span class="hljs-keyword">IMPORT</span> <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">SCHEMA</span> ... <span class="hljs-keyword">LIMIT</span> <span class="hljs-keyword">TO</span> (Matthias van de Meent)<br><br><span class="hljs-keyword">By</span> <span class="hljs-keyword">default</span>, <span class="hljs-keyword">only</span> the root <span class="hljs-keyword">of</span> a partitioned <span class="hljs-keyword">table</span> <span class="hljs-keyword">is</span> imported.<br><br><span class="hljs-keyword">Add</span> postgres_fdw <span class="hljs-keyword">function</span> postgres_fdw_get_connections() <span class="hljs-keyword">to</span> report <span class="hljs-keyword">open</span> <span class="hljs-keyword">foreign</span> <span class="hljs-keyword">server</span> connections (Bharath Rupireddy)<br><br><span class="hljs-keyword">Allow</span> control <span class="hljs-keyword">over</span> whether <span class="hljs-keyword">foreign</span> servers <span class="hljs-keyword">keep</span> connections <span class="hljs-keyword">open</span> <span class="hljs-keyword">after</span> <span class="hljs-keyword">transaction</span> completion (Bharath Rupireddy)<br><br>This <span class="hljs-keyword">is</span> controlled <span class="hljs-keyword">by</span> keep_connections <span class="hljs-keyword">and</span> <span class="hljs-keyword">defaults</span> <span class="hljs-keyword">to</span> on.<br><br><span class="hljs-keyword">Allow</span> postgres_fdw <span class="hljs-keyword">to</span> reestablish <span class="hljs-keyword">foreign</span> <span class="hljs-keyword">server</span> connections <span class="hljs-keyword">if</span> necessary (Bharath Rupireddy)<br><br>Previously <span class="hljs-keyword">foreign</span> <span class="hljs-keyword">server</span> restarts could cause <span class="hljs-keyword">foreign</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">access</span> errors.<br><br><span class="hljs-keyword">Add</span> postgres_fdw functions <span class="hljs-keyword">to</span> discard cached connections (Bharath Rupireddy)<br></code></pre></td></tr></table></figure></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><div class="reward-container"><div>听说，打赏我的人都找到了真爱</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.png" alt="daydayup 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/alipay.png" alt="daydayup 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>daydayup</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://daydayup863.github.io/PostgreSQL/release-note/PostgreSQL_14_release_note/" title="PostgreSQL 14 新特性汇总">http://daydayup863.github.io/PostgreSQL/release-note/PostgreSQL_14_release_note/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i> </span><span class="label">RSS</span></a></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/PostgreSQL/" rel="tag"><i class="fa fa-tag"></i> PostgreSQL</a> <a href="/tags/release-note/" rel="tag"><i class="fa fa-tag"></i> release note</a></div><div class="post-nav"><div class="post-nav-item"><a href="/leader-way/leader_way/" rel="prev" title="转 - 老何的1001夜-如何成为优秀的领导"><i class="fa fa-chevron-left"></i> 转 - 老何的1001夜-如何成为优秀的领导</a></div><div class="post-nav-item"><a href="/PostgreSQL/%E8%BF%81%E7%A7%BB%E5%B7%A5%E5%85%B7/qianyigongju/" rel="next" title="PostgreSQL迁移工具">PostgreSQL迁移工具 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><div><canvas id="canvas" style="width:60%">当前浏览器不支持canvas，请更换浏览器后再试</canvas></div><script>!function(){var o,a,r,f,t,i=[[[0,0,1,1,1,0,0],[0,1,1,0,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,0,1,1,0],[0,0,1,1,1,0,0]],[[0,0,0,1,1,0,0],[0,1,1,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[1,1,1,1,1,1,1]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,0,1,1,1,0],[0,0,1,1,1,1,0],[0,1,1,0,1,1,0],[1,1,0,0,1,1,0],[1,1,1,1,1,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,1,1]],[[1,1,1,1,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,0,0],[1,1,1,1,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,1,1,0,0,0,0]],[[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0]]],e=document.getElementById("canvas");function h(t,e){for(var n=[1,2,3],l=["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"],o=0;o<i[e].length;o++)for(var a,h=0;h<i[e][o].length;h++){1==i[e][o][h]&&(a={x:14*(f+2)*t+2*h*(f+1)+(f+1),y:2*o*(f+1)+(f+1),stepX:Math.floor(4*Math.random()-2),stepY:-2*n[Math.floor(Math.random()*n.length)],color:l[Math.floor(Math.random()*l.length)],disY:1},r.push(a))}}function n(){e.height=100;for(var t=0;t<a.length;t++)!function(t,e){for(var n=0;n<i[e].length;n++)for(var l=0;l<i[e][n].length;l++)1==i[e][n][l]&&(o.beginPath(),o.arc(14*(f+2)*t+2*l*(f+1)+(f+1),2*n*(f+1)+(f+1),f,0,2*Math.PI),o.closePath(),o.fill())}(t,a[t]);for(t=0;t<r.length;t++)o.beginPath(),o.arc(r[t].x,r[t].y,f,0,2*Math.PI),o.fillStyle=r[t].color,o.closePath(),o.fill()}e.getContext&&(o=e.getContext("2d"),e.height=100,e.width=700,o.fillStyle="#f00",o.fillRect(10,10,50,50),a=[],r=[],f=e.height/20-1,t=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),a.push(t[1],t[2],10,t[3],t[4],10,t[5],t[6]),clearInterval(void 0),setInterval(function(){!function(){var t=[],e=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),n=[];n.push(e[1],e[2],10,e[3],e[4],10,e[5],e[6]);for(var l=a.length-1;0<=l;l--)n[l]!==a[l]&&t.push(l+"_"+(Number(a[l])+1)%10);for(l=0;l<t.length;l++)h.apply(this,t[l].split("_"));a=n.concat()}(),function(){for(var t=0;t<r.length;t++)r[t].stepY+=r[t].disY,r[t].x+=r[t].stepX,r[t].y+=r[t].stepY,(r[t].x>700+f||r[t].y>100+f)&&(r.splice(t,1),t--)}(),n()},50))}()</script><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div id="toc-div"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes"><span class="nav-number">1.</span> <span class="nav-text">Changes</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Server"><span class="nav-number">1.1.</span> <span class="nav-text">Server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vacuuming"><span class="nav-number">1.2.</span> <span class="nav-text">Vacuuming</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Partitioning"><span class="nav-number">1.3.</span> <span class="nav-text">Partitioning</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Indexes"><span class="nav-number">1.4.</span> <span class="nav-text">Indexes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optimizer"><span class="nav-number">1.5.</span> <span class="nav-text">Optimizer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#General-Performance"><span class="nav-number">1.6.</span> <span class="nav-text">General Performance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Monitoring"><span class="nav-number">1.7.</span> <span class="nav-text">Monitoring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#System-Views"><span class="nav-number">1.8.</span> <span class="nav-text">System Views</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authentication"><span class="nav-number">1.9.</span> <span class="nav-text">Authentication</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Server-Configuration"><span class="nav-number">1.10.</span> <span class="nav-text">Server Configuration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Streaming-Replication-and-Recovery"><span class="nav-number">1.11.</span> <span class="nav-text">Streaming Replication and Recovery</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SELECT-INSERT"><span class="nav-number">1.12.</span> <span class="nav-text">SELECT, INSERT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Utility-Commands"><span class="nav-number">1.13.</span> <span class="nav-text">Utility Commands</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Data-Types"><span class="nav-number">1.14.</span> <span class="nav-text">Data Types</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Functions"><span class="nav-number">1.15.</span> <span class="nav-text">Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PL-pgSQL"><span class="nav-number">1.16.</span> <span class="nav-text">PL&#x2F;pgSQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Client-Interfaces"><span class="nav-number">1.17.</span> <span class="nav-text">Client Interfaces</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Client-Applications"><span class="nav-number">1.18.</span> <span class="nav-text">Client Applications</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#psql"><span class="nav-number">1.19.</span> <span class="nav-text">psql</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Source-Code"><span class="nav-number">1.20.</span> <span class="nav-text">Source Code</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Additional-Modules"><span class="nav-number">1.21.</span> <span class="nav-text">Additional Modules</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pg-stat-statements"><span class="nav-number">1.22.</span> <span class="nav-text">pg_stat_statements</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#postgres-fdw"><span class="nav-number">1.23.</span> <span class="nav-text">postgres_fdw</span></a></li></ol></li></ol></div></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/"><img class="site-author-image" itemprop="image" alt="daydayup" src="/images/user.jpg"></a><p class="site-author-name" itemprop="name">daydayup</p><div class="site-description" itemprop="description">good good study, day day up.</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">61</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">59</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">84</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/daydayup863" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;daydayup863" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> 大神链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://github.com/digoal/blog" title="https:&#x2F;&#x2F;github.com&#x2F;digoal&#x2F;blog" rel="noopener" target="_blank">德哥</a></li><li class="links-of-blogroll-item"><a href="https://postgres.fun/" title="https:&#x2F;&#x2F;postgres.fun" rel="noopener" target="_blank">francs</a></li><li class="links-of-blogroll-item"><a href="https://pengzhanyuan.github.io/" title="https:&#x2F;&#x2F;pengzhanyuan.github.io&#x2F;" rel="noopener" target="_blank">元叔</a></li><li class="links-of-blogroll-item"><a href="https://www.citusdata.com/blog/tags/performance/" title="https:&#x2F;&#x2F;www.citusdata.com&#x2F;blog&#x2F;tags&#x2F;performance&#x2F;" rel="noopener" target="_blank">citus博客</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">daydayup</span></div><div class="powered-by"><i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv"> 本站访客数:<span id="busuanzi_value_site_uv"></span></span></div><br><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div><br><div class="theme-info"><div class="powered-by"></div><span class="post-count">博客全站共60.7k字</span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/local-search.js"></script><script src="/js/cursor/cherry.js"></script><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script><script>flOptions={iconStyle:"default",boxForm:"horizontal",position:"middleRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : '3i88YSkCct0TI3n9fK42pDqp-gzGzoHsz',
      appKey     : 'HAU6P1j8dEW9P7oMKHQsS0Ub',
      placeholder: "在这里说点什么吧...",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});</script><script type="text/javascript" src="/js/love.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/haruto.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!0}})</script></body></html>